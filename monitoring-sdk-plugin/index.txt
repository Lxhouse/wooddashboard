3:I[4641,[],""]
5:I[2063,[],""]
6:I[3436,["645","static/chunks/645-cf0c536310c9bd45.js","64","static/chunks/app/%5Bslug%5D/layout-447ff52c5afa5bc6.js"],"default"]
7:I[1763,["645","static/chunks/645-cf0c536310c9bd45.js","792","static/chunks/792-a990f77874873bec.js","185","static/chunks/app/layout-1a2c4bccb07c8fb1.js"],"default"]
8:I[966,["645","static/chunks/645-cf0c536310c9bd45.js","42","static/chunks/app/%5Bslug%5D/page-0b8af52342fb8394.js"],"default"]
4:["slug","monitoring-sdk-plugin","d"]
0:["8T3wn1F1pRLVmuuuLhNTA",[[["",{"children":[["slug","monitoring-sdk-plugin","d"],{"children":["__PAGE__?{\"slug\":\"monitoring-sdk-plugin\"}",{}]}]},"$undefined","$undefined",true],["",{"children":[["slug","monitoring-sdk-plugin","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},[[["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],["$","footer",null,{"className":"mt-12","children":["$","$L6",null,{}]}]],null],null]},[["$","$L7",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","article",null,{"className":"markdown","children":[["$","h1",null,{"className":"__className_620977 text-[40px] font-black leading-[44px] text-[--title]","children":"Not found"}],["$","div",null,{"className":"markdown mt-10","children":[["$","p",null,{"children":"这篇文章没有被找到 ?(没有创建 ?)"}],["$","p",null,{"children":["如果你认为是网站的问题,可以点击这里告诉我"," ",["$","$L8",null,{"href":"https://github.com/Lxhouse/wooddashboard/issues","children":"点击这里"}]]}],["$","p",null,{"children":["如果是之前的文章,你却找不到了,可以来这里寻找试试"," ",["$","$L8",null,{"href":"https://github.com/Lxhouse/wooddashboard/tree/main/public","children":"文章档案馆"}]]}],["$","p",null,{"children":"希望你可以找到你需要的那篇文章"}]]}]]}],"notFoundStyles":[],"styles":null}],"params":{}}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/wooddashboard/_next/static/css/f4c9dd7a6d7a870e.css","precedence":"next","crossOrigin":"$undefined"}]],"$L9"]]]]
2:["$","div",null,{"className":"mx-auto max-w-[90rem] px-4 sm:px-6 lg:px-8","children":["$","div",null,{"className":"relative lg:flex lg:gap-8","children":[["$","article",null,{"className":"prose prose-lg dark:prose-invert lg:min-w-[720px] lg:max-w-[720px] xl:min-w-[800px] xl:max-w-[800px]","children":[["$","h1",null,{"className":"__className_620977 text-[40px] font-black leading-[44px] text-[--title] mb-4","children":"监控 SDK 的插件机制设计"}],["$","p",null,{"className":"text-sm text-gray-700 dark:text-gray-300 mb-8","children":"2024/03/21"}],["$","div",null,{"className":"markdown","children":["$La",["$","hr",null,{"className":"my-8"}],["$","p",null,{"className":"flex gap-8","children":[["$","$L8",null,{"href":"www.baidu.com","children":"Discuss on"}],["$","$L8",null,{"href":"www.baidu.com","children":"Edit on GitHub"}]]}]]}]]}],["$","nav",null,{"className":"hidden lg:block lg:min-w-[240px] lg:max-w-[240px] xl:min-w-[280px] xl:max-w-[280px]","children":["$","div",null,{"className":"sticky top-8","children":["$","nav",null,{"className":"text-sm","aria-label":"Table of contents","children":[["$","p",null,{"className":"mb-4 text-base font-medium text-gray-900 dark:text-gray-100","children":"目录"}],["$","ul",null,{"className":"space-y-1","children":[["$","li","-",{"children":["$","a",null,{"href":"#-","className":"block rounded-sm transition-all duration-200\n                  pl-2","children":"核心概念"}]}],["$","li","1-1-",{"children":["$","a",null,{"href":"#1-1-","className":"block rounded-sm transition-all duration-200\n                  pl-6","children":"1.1 插件接口"}]}],["$","li","1-2-",{"children":["$","a",null,{"href":"#1-2-","className":"block rounded-sm transition-all duration-200\n                  pl-6","children":"1.2 生命周期管理"}]}],["$","li","sdk-",{"children":["$","a",null,{"href":"#sdk-","className":"block rounded-sm transition-all duration-200\n                  pl-2","children":"SDK 核心实现"}]}],["$","li","-",{"children":["$","a",null,{"href":"#-","className":"block rounded-sm transition-all duration-200\n                  pl-2","children":"插件示例"}]}],["$","li","3-1-",{"children":["$","a",null,{"href":"#3-1-","className":"block rounded-sm transition-all duration-200\n                  pl-6","children":"3.1 错误监控插件"}]}],["$","li","3-2-",{"children":["$","a",null,{"href":"#3-2-","className":"block rounded-sm transition-all duration-200\n                  pl-6","children":"3.2 性能监控插件"}]}],["$","li","-",{"children":["$","a",null,{"href":"#-","className":"block rounded-sm transition-all duration-200\n                  pl-2","children":"使用示例"}]}],["$","li","-",{"children":["$","a",null,{"href":"#-","className":"block rounded-sm transition-all duration-200\n                  pl-2","children":"插件机制的优势"}]}],["$","li","-",{"children":["$","a",null,{"href":"#-","className":"block rounded-sm transition-all duration-200\n                  pl-2","children":"总结"}]}]]}]]}]}]}]]}]}]
9:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"监控 SDK 的插件机制设计 — wooddashboard"}],["$","meta","3",{"name":"description","content":"深入探讨前端监控 SDK 的插件机制设计，包括生命周期管理、插件注入、错误监控等核心概念"}],["$","link","4",{"rel":"icon","href":"/wooddashboard/icon.png?7c5860f098ab6c65","type":"image/png","sizes":"400x400"}],["$","meta","5",{"name":"next-size-adjust"}]]
1:null
a:[["$","h1",null,{"id":"-sdk-","children":["$","a",null,{"href":"#-sdk-","className":"anchor","children":"监控 SDK 的插件机制设计"}]}],"\n",["$","p",null,{"children":"在构建前端监控 SDK 时，插件机制是一个非常重要的设计模式。它能让我们以模块化的方式扩展 SDK 的功能，同时保持核心代码的简洁和可维护性。本文将深入探讨监控 SDK 的插件机制设计。"}],"\n",["$","h2",null,{"id":"-","children":["$","a",null,{"href":"#-","className":"anchor","children":"核心概念"}]}],"\n",["$","h3",null,{"id":"1-1-","children":["$","a",null,{"href":"#1-1-","className":"anchor","children":"1.1 插件接口"}]}],"\n",["$","p",null,{"children":"每个插件都需要实现统一的接口："}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"interface"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" Plugin "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"string"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 插件名称"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"apply"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"MonitoringSDK"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"):"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"void"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 插件初始化方法"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"start"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"?():"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Promise"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"<"}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"void"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":">"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 启动插件"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"stop"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"?():"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Promise"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"<"}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"void"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":">"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 停止插件"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"id":"1-2-","children":["$","a",null,{"href":"#1-2-","className":"anchor","children":"1.2 生命周期管理"}]}],"\n",["$","p",null,{"children":"SDK 通过生命周期事件来协调各个插件的运行："}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Lifecycle"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"private"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" hooks"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Map"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"<"}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"string"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Set"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"<"}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Function"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":">> "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Map"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 注册事件监听"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"on"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"string"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"handler"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Function"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(!"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"hooks"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"has"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"))"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"hooks"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"set"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Set"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"());"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"hooks"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"get"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")!."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"add"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handler"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 触发事件"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"async"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"string"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" data"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"?:"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"any"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"const"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handlers"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"hooks"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"get"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handlers"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"for"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"const"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handler"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"of"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" handlers"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"await"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"handler"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"data"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","h2",null,{"id":"sdk-","children":["$","a",null,{"href":"#sdk-","className":"anchor","children":"SDK 核心实现"}]}],"\n",["$","p",null,{"children":"SDK 的核心负责管理插件和生命周期："}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"MonitoringSDK"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"private"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" plugins"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Map"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"<"}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"string"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Plugin"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"> "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Map"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"private"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" lifecycle"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Lifecycle"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"constructor"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"config"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"SDKConfig"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"lifecycle "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"Lifecycle"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"initBuiltinPlugins"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 注册插件"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"use"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"Plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugins"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"has"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"))"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"warn"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"`Plugin "}],["$","span",null,{"style":{"color":"#7986E7"},"children":"$${"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#7986E7"},"children":"}"}],["$","span",null,{"style":{"color":"#C792EA"},"children":" already registered`"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 保存插件实例"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugins"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"set"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"name"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 注入 SDK 实例到插件"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"apply"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 启动 SDK"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"async"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"start"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"await"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"lifecycle"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"beforeStart"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 启动所有插件"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"for"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"const"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugin"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"of"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugins"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"values"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"())"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"start"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"await"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"start"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"await"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"lifecycle"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"afterStart"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 停止 SDK"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"async"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"stop"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"await"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"lifecycle"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"beforeStop"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 停止所有插件"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"for"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"const"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugin"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"of"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugins"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"values"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"())"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"stop"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"await"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"stop"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"await"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"lifecycle"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"afterStop"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","h2",null,{"id":"-","children":["$","a",null,{"href":"#-","className":"anchor","children":"插件示例"}]}],"\n",["$","h3",null,{"id":"3-1-","children":["$","a",null,{"href":"#3-1-","className":"anchor","children":"3.1 错误监控插件"}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"ErrorPlugin"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"implements"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" Plugin "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  name "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"error-plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"private"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"MonitoringSDK"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"private"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" isRunning "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F87086"},"children":"false"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"apply"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"MonitoringSDK"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"async"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"start"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"isRunning"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"isRunning "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F87086"},"children":"true"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 监听全局错误"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    window"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"addEventListener"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handleError"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    window"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"addEventListener"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"unhandledrejection"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handlePromiseError"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"async"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"stop"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"if"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(!"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"isRunning"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"return"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"isRunning "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#F87086"},"children":"false"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 移除事件监听"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    window"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"removeEventListener"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handleError"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    window"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"removeEventListener"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"unhandledrejection"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"handlePromiseError"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"private"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"handleError"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"ErrorEvent"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      type"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"javascript"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      message"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"message"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      filename"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"filename"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      lineno"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"lineno"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      colno"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"colno"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      stack"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"?."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"stack"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"};"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"private"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"handlePromiseError"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"PromiseRejectionEvent"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      type"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"promise"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      message"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"reason"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"?."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"message "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"||"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"String"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"reason"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      stack"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" event"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"reason"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"?."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"stack"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"};"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"id":"3-2-","children":["$","a",null,{"href":"#3-2-","className":"anchor","children":"3.2 性能监控插件"}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"class"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"PerformancePlugin"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"implements"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" Plugin "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  name "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"performance-plugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"private"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"MonitoringSDK"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"apply"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFCB8B"},"children":"MonitoringSDK"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"async"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"start"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 收集性能指标"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"collectNavigationTiming"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"observeWebVitals"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"private"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"collectNavigationTiming"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"const"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"timing"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"performance"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"const"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"metrics"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"      "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"dns"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"domainLookupEnd "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"-"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"domainLookupStart"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"      "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"tcp"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"connectEnd "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"-"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"connectStart"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"      "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"ttfb"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"responseStart "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"-"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"navigationStart"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"      "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"domReady"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"domContentLoadedEventEnd "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"-"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"navigationStart"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"      "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"load"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"loadEventEnd "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"-"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" timing"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"navigationStart"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"};"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"performance"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" metrics"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"private"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"observeWebVitals"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"()"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 观察 LCP"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"PerformanceObserver"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"entryList"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"const"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"entries"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"entryList"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"getEntries"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      entries"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"forEach"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"entry"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"performance"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"          type"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"LCP"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"          value"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" entry"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"startTime"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"})."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"observe"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" entryTypes"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"["}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"largest-contentful-paint"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"]"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#637777"},"children":"// 观察 FID"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"PerformanceObserver"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"entryList"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"const"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"entries"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"entryList"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"getEntries"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      entries"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"forEach"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"entry"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"this"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"emit"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"performance"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"          type"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"FID"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"          value"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" entry"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"duration"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"        "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"      "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"    "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"})."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"observe"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" entryTypes"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"["}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"first-input"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"]"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"}"}]}]]}]}]}],"\n",["$","h2",null,{"id":"-","children":["$","a",null,{"href":"#-","className":"anchor","children":"使用示例"}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"Overnight","style":{"backgroundColor":"var(--code-bg)"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// 创建 SDK 实例"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"const "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"="}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"new"}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"MonitoringSDK"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"  "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"appId"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"your-app-id"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"  "}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"reportUrl"}],["$","span",null,{"style":{"color":"#C792EA"},"children":":"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"https://your-monitor-server.com"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// 注册插件"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"use"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"ErrorPlugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"());"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"use"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"(new"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"PerformancePlugin"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"());"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// 监听错误事件"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"on"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"捕获到错误:"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" error"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// 监听性能事件"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"on"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"performance"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#CED2D6"},"children":"metrics"}],["$","span",null,{"style":{"color":"#C792EA"},"children":")"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#FFA7C4"},"children":"=>"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" "}],["$","span",null,{"style":{"color":"#C792EA"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#CED2D6"},"children":"  console"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"log"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"("}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#ECC48D"},"children":"性能指标:"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"'"}],["$","span",null,{"style":{"color":"#C792EA"},"children":","}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" metrics"}],["$","span",null,{"style":{"color":"#C792EA"},"children":");"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#C792EA"},"children":"});"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#637777"},"children":"// 启动 SDK"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#FFA7C4"},"children":"await"}],["$","span",null,{"style":{"color":"#CED2D6"},"children":" sdk"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"."}],["$","span",null,{"style":{"color":"#8EACE3"},"children":"start"}],["$","span",null,{"style":{"color":"#C792EA"},"children":"();"}]]}]]}]}]}],"\n",["$","h2",null,{"id":"-","children":["$","a",null,{"href":"#-","className":"anchor","children":"插件机制的优势"}]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"模块化设计"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"每个插件负责特定的功能"}],"\n",["$","li",null,{"children":"插件之间相互独立，便于维护"}],"\n",["$","li",null,{"children":"可以根据需要动态加载插件"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"扩展性"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"通过插件机制轻松添加新功能"}],"\n",["$","li",null,{"children":"支持自定义插件来满足特定需求"}],"\n",["$","li",null,{"children":"插件可以独立发布和版本管理"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"生命周期管理"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"统一的事件机制"}],"\n",["$","li",null,{"children":"插件可以在适当的时机执行逻辑"}],"\n",["$","li",null,{"children":"支持异步操作"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["$","strong",null,{"children":"可测试性"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"插件逻辑独立，易于单元测试"}],"\n",["$","li",null,{"children":"可以 mock SDK 实例进行测试"}],"\n",["$","li",null,{"children":"生命周期事件便于调试"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h2",null,{"id":"-","children":["$","a",null,{"href":"#-","className":"anchor","children":"总结"}]}],"\n",["$","p",null,{"children":"通过插件机制，我们可以构建一个灵活且可扩展的监控 SDK。核心 SDK 专注于提供基础设施和生命周期管理，具体功能由插件实现。这种设计模式不仅提高了代码的可维护性，也让 SDK 具备了强大的扩展能力。"}],"\n",["$","p",null,{"children":"在实际应用中，我们可以根据需要开发各种插件，如："}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"错误监控插件"}],"\n",["$","li",null,{"children":"性能监控插件"}],"\n",["$","li",null,{"children":"用户行为追踪插件"}],"\n",["$","li",null,{"children":"网络请求监控插件"}],"\n",["$","li",null,{"children":"日志收集插件"}],"\n"]}],"\n",["$","p",null,{"children":"通过组合这些插件，我们可以构建一个完整的前端监控系统。"}]]
